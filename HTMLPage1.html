<!DOCTYPE html>
<html>
<head>
    <title>Leaflet Web Map with Query</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="StyleSheetIndex.css">
  
    <style>
    #map {
    height: 500px;
    width: 50%;
    }
    </style>

</head>
<body>

    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a class="active" href="HTMLPage1.html">Gezondheid 65+</a></li>
        <li><a href="ArcGISAPI.html">ArcGISApi</a></li>
        <li><a href="Mapbox.html">Mapbox</a></li>
    </ul>

    <h1>Leaflet Web Map with Query</h1>
    <div id="map"></div>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Create the map
        const map = L.map('map').setView([52.36645, 5.21835], 7);

        // Add the basemap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; OpenStreetMap contributors'
        }).addTo(map);

        // Perform the query
        const queryUrl = 'https://services.arcgis.com/nSZVuSZjHpEZZbRo/ArcGIS/rest/services/Gemeente_Gezondheidsmonitor_Ouderen_2016/FeatureServer/0/query?where=P_65_EO_JR%20%3E%2022&f=pgeojson&token=AAPK7559b245ac5a47f8b04ffd5ff7423160nueuaMS3gGQ3u9rkReM2fERDijX7W9WaeJ6zxVV_5pIIeH0yuikDTjORDmc6jrZE';

        fetch(queryUrl)
            .then(response => response.json())
            .then(data => {
                // Create a GeoJSON layer and add it to the map
                const geojsonLayer = L.geoJSON(data).addTo(map);
            })

    </script>

    <iframe title="Percentage inwoners 65+ in Europa" aria-label="Map" id="datawrapper-chart-0CbeM" src="https://datawrapper.dwcdn.net/0CbeM/1/" scrolling="no" frameborder="0" style="width: 0; min-width: 50% !important; border: none;" height="635" data-external="1"></iframe>
    <script type="text/javascript">
        !function () { "use strict"; window.addEventListener("message", (function (a) { if (void 0 !== a.data["datawrapper-height"]) { var e = document.querySelectorAll("iframe"); for (var t in a.data["datawrapper-height"]) for (var r = 0; r < e.length; r++)if (e[r].contentWindow === a.source) { var i = a.data["datawrapper-height"][t] + "px"; e[r].style.height = i } } })) }();
    </script>

    <div class="infogram-embed" data-id="06701a76-32a8-4f27-8ed2-cc7d66f6a31b" data-type="interactive" data-title="Benelux percentage 65+ van 1950 tot 2020"></div>
    <script>!function (e, i, n, s) { var t = "InfogramEmbeds", d = e.getElementsByTagName("script")[0]; if (window[t] && window[t].initialized) window[t].process && window[t].process(); else if (!e.getElementById(n)) { var o = e.createElement("script"); o.async = 1, o.id = n, o.src = "https://e.infogram.com/js/dist/embed-loader-min.js", d.parentNode.insertBefore(o, d) } }(document, 0, "infogram-async");</script><div style="padding:8px 0;font-family:Arial!important;font-size:13px!important;line-height:15px!important;text-align:center;border-top:1px solid #dadada;margin:0 30px"><a href="https://infogram.com/06701a76-32a8-4f27-8ed2-cc7d66f6a31b" style="color:#989898!important;text-decoration:none!important;" target="_blank">Benelux percentage 65+ van 1950 tot 2020</a><br><a href="https://infogram.com" style="color:#989898!important;text-decoration:none!important;" target="_blank" rel="nofollow">Infogram</a></div>

</body>
</html>

